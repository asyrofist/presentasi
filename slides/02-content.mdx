import { Appear, Embed, Notes } from 'mdx-deck'
import { CodeSurferLayout } from 'code-surfer'

# Pengujian 
- Bagaimana Cara Kerja Word2vec?
- Hasil Pengujian Word2Vec
- Bagaimana cara kerja WMD?
- Hasil Pengujian WMD
  [...](https://docs.google.com/presentation/d/1O0E7MSXf-KOGmXD05FlminhMrGlvBINZcYu-crI45vQ/edit?usp=sharing)

---
<CodeSurferLayout>

```python
def word2vec():
    sentences = [sentence.split() for sentence in cleaned_text] #requirement statement
    modelWord2vec = Word2Vec(sentences = sentences, size = len(sentences), sg = 1, window = 2, \
                             min_count = 1, iter = 10, workers = Pool()._processes)
    modelWord2vec.init_sims(replace = True)
    ordered_vocab = [(term, voc.index, voc.count) for term, voc in modelWord2vec.wv.vocab.items()]
    ordered_vocab = sorted(ordered_vocab, key=lambda k: k[2])
    ordered_terms, term_indices, term_counts = zip(*ordered_vocab)
    word_vectors = pd.DataFrame(modelWord2vec.wv.syn0[term_indices, :], index=ordered_terms, columns= id_requirement)
    vektor_word = word_vectors.T
    return vektor_word
```
```python
def tableWord2vec():
    tabelWord2vec = []
    for num in range(0, len(cleaned_text)):
      a = [modelWord2vec.wmdistance(cleaned_text[num].split(), cleaned_text[angka].split()) for angka in range(0, len(cleaned_text))]
      tabelWor2vec.append(a)
    word2vecResult = pd.DataFrame(coba, index = id_requirement, columns = id_requirement)
    return word2vecResult
```
  
```python

  class wmdistance(object):
    
    def __init__(self):
        self.stopwords = stopwords.words('english')
        self.w2v_path = 'GoogleNews-vectors-negative300.bin.gz'
        self.loadW2V()
        self.w2v_model.init_sims(replace=True)
        print("\nloaded word2vec model : ")
    
    
    def loadW2V(self):
        if not os.path.exists(self.w2v_path):
            raise ValueError("SKIP: You need to download the google news model")
        self.w2v_model = KeyedVectors.load_word2vec_format(self.w2v_path, limit=300000, binary=True)  
```
  
```python

    def createWmdDataset(self, sent):
        return [wrd for wrd in sent.split() if wrd not in self.stopwords]

    def getWmDistance(self, sent_1, sent_2):
        distance = ''
        try:
            sent_1 = self.createWmdDataset(sent_1)
            sent_2 = self.createWmdDataset(sent_2)
            distance = self.w2v_model.wmdistance(sent_1, sent_2)

            print("\n the word movers distance is => ",distance)
        except Exception as e:
            print("\n Error in getWmDistance --- ", e, "\n", traceback.format_exc())
        return distance

  
```
</CodeSurferLayout>
